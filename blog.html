<!doctype html><html lang="fr">
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width"/>
  <title>Blog ‚Äî Charlott‚Äô Street Club</title>

  <!-- feuille globale du site -->
  <link rel="stylesheet" href="./styles.css"/>

  <!-- (ok de laisser si tu l'as d√©j√†, mais on n'en d√©pend plus) -->
  <link rel="stylesheet" href="./styles-blog.css?v=1">

  <!-- OVERRIDES INLINE = priorit√© max (d√©grad√©s anim√©s, look street/neon) -->
  <style id="blog-overrides">
    :root{
      /* palette extra, en plus de celles d√©j√† dans styles.css */
      --c-rose:#D14D72; 
      --c-gold:#FFD465; 
      --c-turq:#00E0FF; 
      --c-orange:#FF8A00; 
      --c-vert-2:#63A46A;

      /* d√©grad√©s Charlott‚Äô par rubrique (m√©lange avec tes iris/grenat/vert) */
      --grad-journal:  linear-gradient(120deg, var(--c-iris-1), var(--c-turq), var(--c-iris-3));
      --grad-justice:  linear-gradient(120deg, var(--c-orange), var(--c-gold));
      --grad-entraide: linear-gradient(120deg, var(--c-vert), var(--c-vert-2));
      --grad-infos:    linear-gradient(120deg, var(--c-grenat), var(--c-rose));
      --grad-ia:       linear-gradient(120deg, var(--c-turq), var(--c-iris-1));
      --grad-art:      linear-gradient(120deg, var(--c-rose), var(--c-orange));
    }

    /* helpers locaux */
    .hidden{ display:none !important; }

    /* grille des tuiles */
    .cats-grid{
      display:grid; gap:20px;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      margin: 12px 0 20px;
    }

    /* TUile : angle coup√© + glow interne + d√©grad√© anim√© */
    .cat-card{
      position:relative; overflow:hidden; cursor:pointer;
      border-radius:24px; padding:26px; min-height:160px; text-align:left; color:#fff;
      border:1px solid rgba(255,255,255,.08);
      /* base (sera surcharg√©e par variantes) */
      background: var(--grad-journal) !important;
      background-size: 260% 260% !important;
      animation: cscHolo 16s linear infinite !important;
      box-shadow:
        0 14px 40px rgba(0,0,0,.35),
        0 0 0 1px rgba(255,255,255,.06) inset,
        0 0 30px rgba(0,224,255,.12) inset !important;
      /* coupe ‚Äústreet‚Äù sur le coin droit */
      clip-path: polygon(0 0, 96% 0, 100% 10%, 100% 100%, 0 100%) !important;
      transform: translateY(0);
      transition: transform .18s ease, box-shadow .25s ease, clip-path .25s ease;
    }
    .cat-card .emoji{ font-size:44px; display:block; opacity:.95; text-shadow:0 4px 18px rgba(0,0,0,.35); }
    .cat-card .title{ margin-top:10px; font-weight:900; font-size:1.14rem; letter-spacing:.3px; text-shadow:0 2px 12px rgba(0,0,0,.35); }

    .cat-card:hover{
      transform: translateY(-4px);
      box-shadow:
        0 24px 60px rgba(0,0,0,.45),
        0 0 0 1px rgba(255,255,255,.10) inset,
        0 0 42px rgba(255,255,255,.08) inset !important;
      clip-path: polygon(0 0, 94% 0, 100% 12%, 100% 100%, 0 100%) !important;
    }

    /* alternance du sens du d√©grad√© pour un effet vivant */
    .cats-grid .cat-card:nth-child(even){ animation-direction: reverse !important; }

    /* variantes (couleurs Charlott‚Äô) */
    .cat--journal  { background: var(--grad-journal) !important; }
    .cat--justice  { background: var(--grad-justice) !important; color:#111 !important; }
    .cat--entraide { background: var(--grad-entraide) !important; }
    .cat--infos    { background: var(--grad-infos) !important; }
    .cat--ia       { background: var(--grad-ia) !important; }
    .cat--art      { background: var(--grad-art) !important; }

    /* section liste / lecture */
    .post-view .cover{ width:100%; height:auto; border-radius:12px; margin:.6rem 0; }
    .back-link{ display:inline-block; margin:.2rem 0 .6rem; }
    .toolbar{ display:flex; flex-wrap:wrap; gap:.8rem; align-items:center; justify-content:space-between; margin: .5rem 0 1rem; }
    .search{ display:flex; gap:.5rem; align-items:center; }
    .search input{ border:1px solid rgba(255,255,255,.35); padding:.5rem .7rem; border-radius:.6rem; min-width:260px; }
    .button.is-saved{ border-color:#2E7D6B; color:#2E7D6B; }

    /* animation du d√©grad√© */
    @keyframes cscHolo{
      0%{background-position:0% 50%}
      50%{background-position:100% 50%}
      100%{background-position:0% 50%}
    }
    /* accessibilit√© : coupe l‚Äôanim si l‚Äôutilisateur pr√©f√®re */
    @media (prefers-reduced-motion: reduce){
      .cat-card{ animation:none !important; background-size:auto !important; }
    }
  </style>
</head>

<body data-page="blog">
<header class="topbar"><nav class="topbar-nav">
  <div class="brand"><img src="./assets/logo-hero.png" alt="Logo CSC"/><span>Charlott‚Äô Street Club</span></div>
  <a class="nav" href="./index.html">Accueil</a>
  <a class="nav" href="./app.html">/app</a>
  <a class="nav" href="./segments.html">/segments</a>
  <a class="nav" href="./media-kit.html">/media-kit</a>
  <a class="nav" href="./partenaires.html">/partenaires</a>
  <a class="nav" href="./associations.html">/associations</a>
  <span style="flex:1"></span>
  <a class="nav is-cta" href="./app.html">Rejoindre l‚ÄôAgora</a>
</nav></header>

<main class="container">
  <h1>Blog ‚Äî Rubriques</h1>
  <p class="meta">Prototype 100% client-side (aucune collecte). D‚Äôabord les rubriques, puis les articles, puis la lecture.</p>

  <!-- 1) grille des rubriques -->
  <section id="cat-grid" class="cats-grid" aria-label="Rubriques"></section>

  <!-- 2) section liste + lecture -->
  <section id="post-section" class="hidden" aria-live="polite">
    <div class="toolbar">
      <a id="back" class="button ghost" href="#">‚Üê Rubriques</a>
      <span class="brand" id="current-cat" style="opacity:.9"></span>
      <span style="flex:1"></span>
      <div class="search">
        <input id="q" placeholder="Rechercher‚Ä¶" aria-label="Recherche"/>
        <button id="btn-favs" class="button outline" type="button">Mes favoris</button>
        <span class="badge" id="count">0 posts</span>
      </div>
    </div>

    <div id="post-grid" class="grid"></div>
    <article id="post-view" class="post-view hidden"></article>
  </section>
</main>

<!-- Donn√©es embarqu√©es (z√©ro 404) -->
<script>
const BLOG_DATA = {
  categories: [
    {id:"journal",  name:"Journal de Charlott Street", emoji:"üìì"},
    {id:"justice",  name:"Espace Justice citoyenne",   emoji:"‚öñÔ∏è"},
    {id:"entraide", name:"Solidarit√© & entraide",       emoji:"ü§ù"},
    {id:"infos",    name:"Infos ind√©pendantes",         emoji:"üóûÔ∏è"},
    {id:"ia",       name:"Intelligence artificielle",   emoji:"ü§ñ"},
    {id:"art",      name:"Art libre",                   emoji:"üé®"}
  ],
  posts: [
    {slug:"journal-001-on-reconstruit", title:"On reconstruit.", excerpt:"Pourquoi ce journal, notre m√©thode et vos r√¥les.", date:"2025-11-02", author:"CSC", category:"journal", tags:["annonce","roadmap"], cover:"./assets/cover_journal.png", body:"<p>Bienvenue dans le journal du projet. Ici on documente tout&nbsp;: choix, doutes, tests, victoires. Notre boussole&nbsp;: sobri√©t√©, souverainet√©, solidarit√©. Rejoins l‚ÄôAgora pour participer.</p>"},
    {slug:"justice-plainte-collective-modele", title:"Plainte collective&nbsp;: mod√®le simple", excerpt:"Un mod√®le pour signaler une atteinte aux droits.", date:"2025-10-30", author:"CSC - Justice", category:"justice", tags:["recours","droits"], cover:"./assets/cover_justice.png", body:"<p>Mod√®le court √† adapter&nbsp;: faits, droit applicable, demande. √Ä venir en version PDF signable.</p>"},
    {slug:"entraide-carte-points-accueil", title:"Carte des points d‚Äôaccueil (b√©ta)", excerpt:"Une carto l√©g√®re pour s‚Äôorienter localement.", date:"2025-10-28", author:"CSC - Entraide", category:"entraide", tags:["terrain","carto"], cover:"./assets/cover_entraide.png", body:"<p>Premi√®re it√©ration de la cartographie. Contribue via l‚ÄôAgora&nbsp;: ajoute ton point d‚Äôaide.</p>"},
    {slug:"infos-recap-hebdo", title:"R√©cap‚Äô hebdo ‚Äî ind√©pendances", excerpt:"S√©lection d‚Äôarticles et ressources non-align√©es.", date:"2025-10-27", author:"CSC - Infos", category:"infos", tags:["veille","analyse"], cover:"./assets/cover_infos.png", body:"<ul><li>Dossier A&nbsp;: √©tat social</li><li>√âtude B&nbsp;: non-recours</li><li>Carte C&nbsp;: services publics</li></ul>"},
    {slug:"ia-guichet-lilia-frugale", title:"Guichet ¬´ LilIA ¬ª frugale", excerpt:"Un compagnon IA sobre, local, utile.", date:"2025-10-26", author:"CSC - IA", category:"ia", tags:["ia","frugal"], cover:"./assets/cover_ia.png", body:"<p>Conception d‚Äôun agent tr√®s focalis√© (RSA, logement, non-recours) avec tra√ßabilit√© et minimisation des donn√©es.</p>"},
    {slug:"art-libre-affiches-70s", title:"Affiches libres (style 70‚Äôs)", excerpt:"Un kit d‚Äôaffiches r√©utilisables.", date:"2025-10-25", author:"CSC - Studio", category:"art", tags:["affiches","assets"], cover:"./assets/cover_art.png", body:"<p>T√©l√©charge, imprime, colle&nbsp;: des visuels libres sous licence Creative Commons. QR vers le manifeste.</p>"}
  ]
};
</script>

<!-- Script autonome : tuiles ‚Üí liste ‚Üí lecture (+ favoris) -->
<script>
const state = { data: BLOG_DATA, favs: new Set(JSON.parse(localStorage.getItem('csc_blog_favs_v1')||'[]')), cat:null, q:'', showFavs:false };
const els = { catGrid:null, postSection:null, postGrid:null, postView:null, back:null, q:null, btnFavs:null, count:null, currentCat:null };
function saveFavs(){ localStorage.setItem('csc_blog_favs_v1', JSON.stringify([...state.favs])); }
function $(s){ return document.querySelector(s); }

function init(){
  els.catGrid=$('#cat-grid'); els.postSection=$('#post-section'); els.postGrid=$('#post-grid'); els.postView=$('#post-view');
  els.back=$('#back'); els.q=$('#q'); els.btnFavs=$('#btn-favs'); els.count=$('#count'); els.currentCat=$('#current-cat');

  renderCats();
  els.back.addEventListener('click', e=>{ e.preventDefault(); goHome(); });
  els.q.addEventListener('input', e=>{ state.q=e.target.value.trim().toLowerCase(); renderPosts(); });
  els.btnFavs.addEventListener('click', ()=>{ state.showFavs=!state.showFavs; renderPosts(); });

  const slug = new URLSearchParams(location.search).get('p');
  if(slug){
    const p = state.data.posts.find(x=>x.slug===slug);
    if(p){ state.cat=p.category; showListFor(state.cat); renderPosts(); showPost(p); }
  }
}

function goHome(){
  state.cat=null; state.q=''; state.showFavs=false;
  els.q.value=''; els.btnFavs.classList.remove('primary');
  els.postSection.classList.add('hidden'); els.postView.classList.add('hidden'); els.postGrid.classList.remove('hidden'); els.catGrid.classList.remove('hidden');
}

function renderCats(){
  els.catGrid.innerHTML = state.data.categories.map(c=>`
    <button class="cat-card cat--${c.id}" data-id="${c.id}">
      <span class="emoji">${c.emoji||''}</span>
      <span class="title">${c.name}</span>
    </button>`).join('');
  els.catGrid.querySelectorAll('.cat-card').forEach(b=>b.addEventListener('click', ()=>{ showListFor(b.dataset.id); renderPosts(); }));
}

function showListFor(catId){
  state.cat=catId;
  const catName = state.data.categories.find(x=>x.id===catId)?.name||'Tous';
  els.currentCat.textContent=catName;
  els.catGrid.classList.add('hidden'); els.postSection.classList.remove('hidden'); els.postView.classList.add('hidden'); els.postGrid.classList.remove('hidden');
  state.q=''; els.q.value=''; state.showFavs=false; els.btnFavs.classList.remove('primary');
}

function renderPosts(){
  const posts = state.data.posts
    .filter(p=>!state.cat||p.category===state.cat)
    .filter(p=>state.showFavs?state.favs.has(p.slug):true)
    .filter(p=>{ if(!state.q) return true; const hay=(p.title+' '+p.excerpt+' '+(p.tags||[]).join(' ')).toLowerCase(); return hay.includes(state.q); })
    .sort((a,b)=>a.date<b.date?1:-1);

  els.count.textContent=`${posts.length} posts`;
  els.btnFavs.classList.toggle('primary', state.showFavs);

  els.postGrid.innerHTML = posts.map(p=>`
    <article class="card">
      ${p.cover?`<img class="cover" src="${p.cover}" alt="">`:''}
      <div class="card-body">
        <div class="small meta">${new Date(p.date).toLocaleDateString('fr-FR')} ‚Äî ${p.author||''}</div>
        <h3>${p.title}</h3>
        <p class="meta">${p.excerpt||''}</p>
        <div class="row">
          <button class="button outline" data-read="${p.slug}">Lire</button>
          <button class="button ${state.favs.has(p.slug)?'is-saved':''}" data-fav="${p.slug}">${state.favs.has(p.slug)?'‚òÖ':'‚òÜ'} Favori</button>
          <a class="button ghost" href="#" data-copy="${p.slug}">Copier lien</a>
        </div>
      </div>
    </article>`).join('') || '<div class="card">Aucun article dans cette rubrique‚Ä¶</div>';

  els.postGrid.querySelectorAll('[data-fav]').forEach(b=>b.addEventListener('click', ()=>{
    const s=b.dataset.fav; state.favs.has(s)?state.favs.delete(s):state.favs.add(s); saveFavs(); renderPosts();
  }));
  els.postGrid.querySelectorAll('[data-read]').forEach(b=>b.addEventListener('click', ()=>{
    const s=b.dataset.read; const p=state.data.posts.find(x=>x.slug===s); showPost(p);
  }));
  els.postGrid.querySelectorAll('[data-copy]').forEach(a=>a.addEventListener('click', e=>{
    e.preventDefault(); const s=a.dataset.copy; const u=new URL(location.href); u.searchParams.set('p',s);
    navigator.clipboard.writeText(u.toString()); a.classList.add('pulse'); setTimeout(()=>a.classList.remove('pulse'),300);
  }));
}

function showPost(post){
  els.postView.innerHTML = `
    <article class="card">
      <a href="#" id="close-post" class="back-link">‚Üê Retour aux articles</a>
      <h2>${post.title}</h2>
      <div class="small meta">${new Date(post.date).toLocaleDateString('fr-FR')} ‚Äî ${post.author||''}</div>
      ${post.cover?`<img class="cover" src="${post.cover}" alt="">`:''}
      <div class="body">${post.body||''}</div>
    </article>`;
  els.postView.classList.remove('hidden'); els.postGrid.classList.add('hidden');
  document.getElementById('close-post').addEventListener('click', e=>{
    e.preventDefault(); els.postView.classList.add('hidden'); els.postGrid.classList.remove('hidden');
  });
}

window.addEventListener('DOMContentLoaded', init);
</script>

<!-- bouton flottant ‚ÄúRejoindre l‚ÄôAgora‚Äù (d√©j√† en place dans le site) -->
<script defer src="./js/cta.js"></script>
</body></html>
